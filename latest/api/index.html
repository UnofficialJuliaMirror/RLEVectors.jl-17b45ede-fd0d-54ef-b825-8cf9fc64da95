<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Peter Haverty">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>API - RLEVectors.jl</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../assets/Documenter.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "API";
    var mkdocs_page_input_path = "api.md";
    var mkdocs_page_url = "/api/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> RLEVectors.jl</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>News</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../NEWS/">Changelog</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../TODO/">TODO</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">API</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#the-rlevectors-types-and-methods">The RLEVectors Types and Methods</a></li>
                
                    <li><a class="toctree-l4" href="#index">Index</a></li>
                
                    <li><a class="toctree-l4" href="#types">Types</a></li>
                
                    <li><a class="toctree-l4" href="#standard-vector-api-methods">Standard Vector API methods</a></li>
                
                    <li><a class="toctree-l4" href="#working-with-runs">Working with runs</a></li>
                
                    <li><a class="toctree-l4" href="#working-with-run-boundaries-ranges">Working with run boundaries / ranges</a></li>
                
                    <li><a class="toctree-l4" href="#split-and-tapply-like-operations">split and tapply -like operations</a></li>
                
                    <li><a class="toctree-l4" href="#summaries-on-rlevectors">Summaries on RLEVectors</a></li>
                
                    <li><a class="toctree-l4" href="#utility-functions">Utility Functions</a></li>
                
            
            </ul>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">RLEVectors.jl</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>API</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/phaverty/RLEVectors.jl/edit/master/docs/api.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p><a id='The-RLEVectors-Types-and-Methods-1'></a></p>
<h1 id="the-rlevectors-types-and-methods">The RLEVectors Types and Methods</h1>
<p><a id='Index-1'></a></p>
<h2 id="index">Index</h2>
<ul>
<li><a href="./#RLEVectors.RLEDataFrame"><code>RLEVectors.RLEDataFrame</code></a></li>
<li><a href="./#RLEVectors.RLEVector"><code>RLEVectors.RLEVector</code></a></li>
<li><a href="./#Base.Sort.searchsortedfirst-Tuple{AbstractArray{T,1},AbstractArray{T,1},Int64,Int64}"><code>Base.Sort.searchsortedfirst</code></a></li>
<li><a href="./#Base.Sort.searchsortedfirst-Tuple{AbstractArray{T,1},AbstractArray{T,1}}"><code>Base.Sort.searchsortedfirst</code></a></li>
<li><a href="./#RLEVectors.disjoin"><code>RLEVectors.disjoin</code></a></li>
<li><a href="./#RLEVectors.disjoin_length"><code>RLEVectors.disjoin_length</code></a></li>
<li><a href="./#RLEVectors.inverse_ree"><code>RLEVectors.inverse_ree</code></a></li>
<li><a href="./#RLEVectors.numruns"><code>RLEVectors.numruns</code></a></li>
<li><a href="./#RLEVectors.rangeMeans"><code>RLEVectors.rangeMeans</code></a></li>
<li><a href="./#RLEVectors.ree"><code>RLEVectors.ree</code></a></li>
<li><a href="./#RLEVectors.rep"><code>RLEVectors.rep</code></a></li>
</ul>
<p><a id='Types-1'></a></p>
<h2 id="types">Types</h2>
<p><a id='RLEVectors.RLEVector' href='#RLEVectors.RLEVector'>#</a>
<strong><code>RLEVectors.RLEVector</code></strong> &mdash; <em>Type</em>.</p>
<p><strong>RLEVectors</strong></p>
<p><code>RLEVectors</code> is an alternate implementation of the Rle type from Bioconductor's IRanges package by H. Pages, P. Aboyoun and M. Lawrence. RLEVectors represent a vector with repeated values as the ordered set of values and repeat extents. In the field of genomics, data of various types measured across the ~3 billion letters in the human genome can often be represented in a few thousand runs. It is useful to know the bounds of genome regions covered by these runs, the values associated with these runs, and to be able to perform various mathematical operations on these values.</p>
<p><code>RLEVectors</code> can be created from a single vector or a vector of values and a vector of run ends. In either case runs of values or zero length runs will be compressed out. RLEVectors can be expanded to a full vector with <code>collect</code>.</p>
<p><strong>Aliases</strong></p>
<p>Several aliases are defined for specific types of RLEVector (or collections thereof).</p>
<pre><code>FloatRle              RLEVector{Float64,UInt32}
IntegerRle            RLEVector{Int64,UInt32}
BoolRle               RLEVector{Bool,UInt32}
StringRle             RLEVector{String,UInt32}
RLEVectorList{T1,T2}  Vector{ RLEVector{T1,T2} }
</code></pre>

<p><strong>Constructors</strong></p>
<p><code>RLEVector</code>s can be created by specifying a vector to compress or the runvalues and run ends.</p>
<pre><code>x = RLEVector([1,1,2,2,3,3,4,4,4])
x = RLEVector([4,5,6],[3,6,9])
</code></pre>

<p><strong>Describing <code>RLEVector</code> objects</strong></p>
<p><code>RLEVector</code>s implement the usual descriptive functions for an array as well as some that are specific to the type.</p>
<ul>
<li><code>length(x)</code> The full length of the vector, uncompressed</li>
<li><code>size(x)</code> Same as <code>length</code>, as for any other vector</li>
<li><code>size(x,dim)</code> Returns <code>(length(x),1) for dim == 1</code></li>
<li><code>rfirst(x)</code> The index of the beginning of each run</li>
<li><code>rwidth(x)</code> The width of each run</li>
<li><code>rlast(x)</code> The index of the end of each run</li>
<li><code>rvalue(x)</code> The data value for each run</li>
<li><code>isempty(x)</code> Returns boolean, as for any other vector</li>
<li><code>nrun(x)</code> Returns the number of runs represented in the array</li>
<li><code>eltype(x)</code> Returns the element type of the runs</li>
<li><code>endtype(x)</code> Returns the element type of the run ends</li>
</ul>
<p><a target='_blank' href='https://github.com/phaverty/RLEVectors.jl/tree/9c8a6c7c9d15bd38fe507f80aa32dbec2dda34b4/src/RLEVector-type.jl#L3-L49' class='documenter-source'>source</a><br></p>
<p><a id='RLEVectors.RLEDataFrame' href='#RLEVectors.RLEDataFrame'>#</a>
<strong><code>RLEVectors.RLEDataFrame</code></strong> &mdash; <em>Type</em>.</p>
<p>An RLEDataFrame extends DataFrame and contains a colection of like-length and like-type     RLEVectors. In a way, this creates a type like an RLE matrix. But, we deliberately     avoid the complexity of matrix operations, such as factorization. It is expected     that most operations will be column-wise. Based on RleDataFrame from Bioconductor's     <code>genoset</code> package (also by Peter Haverty).</p>
<p><strong>Constructors</strong></p>
<pre><code class="julia">DataFrame(columns::Vector{RLEVector},  names::Vector{Symbol})
DataFrame(kwargs...)
</code></pre>

<p><strong>Examples</strong></p>
<pre><code class="julia">RLEDataFrame( [RLEVector([1, 1, 2]),  RLEVector([2, 2, 2])], [:a, :b] )
</code></pre>

<p><a target='_blank' href='https://github.com/phaverty/RLEVectors.jl/tree/9c8a6c7c9d15bd38fe507f80aa32dbec2dda34b4/src/RLEDataFrame-type.jl#L1-L20' class='documenter-source'>source</a><br></p>
<p><a id='Standard-Vector-API-methods-1'></a></p>
<h2 id="standard-vector-api-methods">Standard Vector API methods</h2>
<p><a id='Working-with-runs-1'></a></p>
<h2 id="working-with-runs">Working with runs</h2>
<p><code>RLEVectors.jl</code> has a collection of functions for working with runs in standard vectors. These are mostly for internal use, but are exported as they may be of general use.</p>
<p><a id='RLEVectors.numruns' href='#RLEVectors.numruns'>#</a>
<strong><code>RLEVectors.numruns</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>numruns(x)
</code></pre>

<p>Count the number of runs of repeated values present in a vector.</p>
<p><a target='_blank' href='https://github.com/phaverty/RLEVectors.jl/tree/9c8a6c7c9d15bd38fe507f80aa32dbec2dda34b4/src/runs.jl#L3-L7' class='documenter-source'>source</a><br></p>
<pre><code>numruns(runvalues, runends)
</code></pre>

<p>Given run values and run ends for a RLEVector, determine the number of runs that would     be present if it were re-compressed. RLEVectors.jl does this operation after modifying     an RLEVector, for example.</p>
<p><a target='_blank' href='https://github.com/phaverty/RLEVectors.jl/tree/9c8a6c7c9d15bd38fe507f80aa32dbec2dda34b4/src/runs.jl#L49-L55' class='documenter-source'>source</a><br></p>
<p><a id='RLEVectors.ree' href='#RLEVectors.ree'>#</a>
<strong><code>RLEVectors.ree</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>ree(x)
</code></pre>

<p>Run End Encode a vector</p>
<p>Like RLE, but returns (runvalues,runends) rather than (runvalues,runlengths)</p>
<p><a target='_blank' href='https://github.com/phaverty/RLEVectors.jl/tree/9c8a6c7c9d15bd38fe507f80aa32dbec2dda34b4/src/runs.jl#L21-L27' class='documenter-source'>source</a><br></p>
<pre><code>ree(runvalues, runends)
</code></pre>

<p>Tidy up an existing (mostly) Run End Encoded vector, dropping zero length runs and fixing         any adjacent identical values. <code>RLEVectors.jl</code> does this operation after modifying an      RLEVector, for example.</p>
<p><a target='_blank' href='https://github.com/phaverty/RLEVectors.jl/tree/9c8a6c7c9d15bd38fe507f80aa32dbec2dda34b4/src/runs.jl#L76-L82' class='documenter-source'>source</a><br></p>
<p><a id='RLEVectors.inverse_ree' href='#RLEVectors.inverse_ree'>#</a>
<strong><code>RLEVectors.inverse_ree</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>inverse_ree(rle)
</code></pre>

<p>Uncompress the runs and runends of an RLEVector.</p>
<p><strong>Examples</strong></p>
<pre><code>collect(rle)
inverse_ree( runvalues(rle), runends(rle) )
</code></pre>

<p><a target='_blank' href='https://github.com/phaverty/RLEVectors.jl/tree/9c8a6c7c9d15bd38fe507f80aa32dbec2dda34b4/src/runs.jl#L115-L123' class='documenter-source'>source</a><br></p>
<p><a id='Working-with-run-boundaries-/-ranges-1'></a></p>
<h2 id="working-with-run-boundaries-ranges">Working with run boundaries / ranges</h2>
<p>We define some functions for comparing bins defined by our run end values.</p>
<p><a id='RLEVectors.disjoin' href='#RLEVectors.disjoin'>#</a>
<strong><code>RLEVectors.disjoin</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>disjoin(x, y)
</code></pre>

<p>Takes runends from two RLEVectors, make one new runends breaking the pair into non-overlapping runs. Basically, this is an optimized <code>sort!(unique([x,y])))</code>. This is useful when comparing two RLEVector objects. The values corresponding to each disjoint run in <code>x</code> and <code>y</code> can then be compared directly.</p>
<p><strong>Returns</strong></p>
<p>An integer vector, of a type that is the promotion of the eltypes of the runends of x and y.</p>
<p><strong>Examples</strong></p>
<pre><code class="julia">x = [2, 4, 6]
y = [3, 4, 5, 6]
disjoin(x,y)
5-element Array{Int64,1}:
 2
 3
 4
 5
 6
</code></pre>

<p><a target='_blank' href='https://github.com/phaverty/RLEVectors.jl/tree/9c8a6c7c9d15bd38fe507f80aa32dbec2dda34b4/src/ranges.jl#L28-L49' class='documenter-source'>source</a><br></p>
<pre><code>disjoin(rle_x, rle_y)
</code></pre>

<p><strong>Examples</strong></p>
<pre><code class="julia">x = RLEVector([1,1,2,2,3,3])
y = RLEVector([1,1,1,2,3,4])
disjoin(x,y)
([2,3,4,5,6],[1,2,2,3,3],[1,1,2,3,4])
</code></pre>

<p><a target='_blank' href='https://github.com/phaverty/RLEVectors.jl/tree/9c8a6c7c9d15bd38fe507f80aa32dbec2dda34b4/src/ranges.jl#L84-L94' class='documenter-source'>source</a><br></p>
<p><a id='RLEVectors.disjoin_length' href='#RLEVectors.disjoin_length'>#</a>
<strong><code>RLEVectors.disjoin_length</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>disjoin_length(x, y)
</code></pre>

<p>Take two runends vectors (strictly increasing integers) and find the number of unique values for the disjoin operation. This is essentially an optimized <code>length(unique( vcat(x, y) ))</code>.</p>
<p><a target='_blank' href='https://github.com/phaverty/RLEVectors.jl/tree/9c8a6c7c9d15bd38fe507f80aa32dbec2dda34b4/src/ranges.jl#L3-L8' class='documenter-source'>source</a><br></p>
<p><a id='split-and-tapply-like-operations-1'></a></p>
<h2 id="split-and-tapply-like-operations">split and tapply -like operations</h2>
<p>An RLEVector can be used like R's factor type to apply a function over (contiguous) sections of another vector. For example, here we break a vector into 5 groups and take the average of each group. In the second example, we also scale each mean by the RLE run value corresponding to each group.</p>
<pre><code class="docs">tapply
</code></pre>

<p><a id='Summaries-on-RLEVectors-1'></a></p>
<h2 id="summaries-on-rlevectors">Summaries on RLEVectors</h2>
<p>Often we want to summarize sections of our RLEVectors. For example, if the RLEVector represent data along a genome, what are the average values associated with each of a set of regions/genes?</p>
<p><a id='RLEVectors.rangeMeans' href='#RLEVectors.rangeMeans'>#</a>
<strong><code>RLEVectors.rangeMeans</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>rangeMeans(ranges::Vector{UnitRange{T}}, rle::RLEVector)

Subset an RLEVector by one or more ranges, returning the average value within each range. Really, an
optimized `[ mean(x[ r ]) for r in ranges ]`.
</code></pre>

<p><a target='_blank' href='https://github.com/phaverty/RLEVectors.jl/tree/9c8a6c7c9d15bd38fe507f80aa32dbec2dda34b4/src/ranges.jl#L144-L149' class='documenter-source'>source</a><br></p>
<p><a id='Utility-Functions-1'></a></p>
<h2 id="utility-functions">Utility Functions</h2>
<p>We also define some utility functions for working with repeated values and binary searching in bins/sorted integers like our run end values.</p>
<p><a id='RLEVectors.rep' href='#RLEVectors.rep'>#</a>
<strong><code>RLEVectors.rep</code></strong> &mdash; <em>Function</em>.</p>
<pre><code>rep(x::Union{Any,Vector}; each::Union{Int,Vector{Int}} = ones(Int,length(x)), times::Int = 1)
</code></pre>

<p>Construct a vector of repeated values, just like R's <code>rep</code> function. We do not have a <code>length_out</code> argument at this time.</p>
<p><strong>Examples</strong></p>
<pre><code class="julia">rep([&quot;Go&quot;, &quot;Fight&quot;, &quot;Win&quot;], times=2)

# output
6-element Array{String,1}:
 &quot;Go&quot;   
 &quot;Fight&quot;
 &quot;Win&quot;  
 &quot;Go&quot;   
 &quot;Fight&quot;
 &quot;Win&quot;  
</code></pre>

<pre><code class="julia">rep([&quot;A&quot;, &quot;B&quot;, &quot;C&quot;], each=3)

# output
9-element Array{String,1}:
 &quot;A&quot;
 &quot;A&quot;
 &quot;A&quot;
 &quot;B&quot;
 &quot;B&quot;
 &quot;B&quot;
 &quot;C&quot;
 &quot;C&quot;
 &quot;C&quot;
</code></pre>

<p><a target='_blank' href='https://github.com/phaverty/RLEVectors.jl/tree/9c8a6c7c9d15bd38fe507f80aa32dbec2dda34b4/src/utils.jl#L1-L37' class='documenter-source'>source</a><br></p>
<p><a id='Base.Sort.searchsortedfirst-Tuple{AbstractArray{T,1},AbstractArray{T,1}}' href='#Base.Sort.searchsortedfirst-Tuple{AbstractArray{T,1},AbstractArray{T,1}}'>#</a>
<strong><code>Base.Sort.searchsortedfirst</code></strong> &mdash; <em>Method</em>.</p>
<p>RLEVectors.jl define new methods for this binary search function. The method for two vectors is like R's findinterval. The index of the position of each <code>x</code> in <code>v</code> is     determined searching within the index bounds <code>lo</code> and <code>hi</code>, inclusive. For the returned     indices <code>i</code>, <code>v[i] &lt;= x[i] &lt; v[i+1]</code>.</p>
<p>This operation is helpful for finding the RLE run corresponding to each of a set of indices or     general tasks such as binning values for empirical density functions.</p>
<p><strong>Examples</strong></p>
<pre><code class="julia">v = [2, 4, 6, 8, 10]
x = [1, 3, 4, 8, 11]
searchsortedfirst(v, x)
5-element Array{Int64,1}:
 1
 2
 2
 4
 6

</code></pre>

<p><a target='_blank' href='https://github.com/phaverty/RLEVectors.jl/tree/9c8a6c7c9d15bd38fe507f80aa32dbec2dda34b4/src/utils.jl#L60-L82' class='documenter-source'>source</a><br></p>
<p><a id='Base.Sort.searchsortedfirst-Tuple{AbstractArray{T,1},AbstractArray{T,1},Int64,Int64}' href='#Base.Sort.searchsortedfirst-Tuple{AbstractArray{T,1},AbstractArray{T,1},Int64,Int64}'>#</a>
<strong><code>Base.Sort.searchsortedfirst</code></strong> &mdash; <em>Method</em>.</p>
<p>The four argument version substitutes customized ordering for a hard-coded '&lt;'.     This is a is a silly optimization that I hope to get rid of soon.</p>
<p><a target='_blank' href='https://github.com/phaverty/RLEVectors.jl/tree/9c8a6c7c9d15bd38fe507f80aa32dbec2dda34b4/src/utils.jl#L111-L114' class='documenter-source'>source</a><br></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../TODO/" class="btn btn-neutral" title="TODO"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/phaverty/RLEVectors.jl" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../TODO/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script src="../js/theme.js"></script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="../assets/mathjaxhelper.js"></script>

</body>
</html>
